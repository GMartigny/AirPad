<!DOCTYPE html>
<html>
    <head>
        <title>Simple Avoid the blades</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="style.css"/>
        <script src="../../Screen side/AirPadReceiver.js"></script>
        <script src="game.js"></script>
    </head>
    <body>
        <canvas width="800" height="600" id="can"></canvas>
        <div id="help">Move with arrows and use your blink with space.<br/>Click when you're ready !</div>
        <aside id="airpad">
            <h2>You can play with your SmartPhone !!</h2>
            <img id="qr-code" />
        </aside>
        <script>
            // Code for the AirPad
            var receiver = new AirPadReceiver("heroku.com/app159/", 1337);
            receiver.onload = function(){
                var qrcode = this.getQR();
                aside.appendChild(qrcode);
                qrcode.onload = function(){
                    aside.style.right = "-320px";
                };
            };
            receiver.onclose = receiver.ondisconnect = function(){
                help.innerHTML = "Connection with controller lost";
                help.style.opacity = 1;
                aside.style.right = "-320px";
            };
            // end
            
            var help = document.getElementById("help"),
                aside = document.getElementById("airpad"),
                can = document.getElementById("can"),
                ctx = can.getContext("2d");
            
            function start(){
                help.style.opacity = 0;
                aside.style.right = 0;
                
                ply = new Player();
                ctx.fillStyle = '#666';
                draw();
            }
            window.onclick = start;
        </script>
    </body>
</html>
